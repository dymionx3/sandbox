<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>
      M.V. Electronix LLC - PDF Studio
    </title>
    <meta name="description" content="Powerful client-side PDF tools: Create, edit, merge, split, compress, and convert PDFs with complete privacy.">
    <!-- CDN Links -->
    <script src="https://cdn.tailwindcss.com">
  </script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js">
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js">
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js">
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdf-lib/1.17.1/pdf-lib.min.js">
</script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
<style>
  @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');
    
    * { 
      font-family: 'Inter', system-ui, -apple-system, Segoe UI, Roboto, sans-serif; 
      box-sizing: border-box;
    }
    
    .gradient-bg { 
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); 
    }
    
    .gradient-text {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      -webkit-background-clip: text; 
      -webkit-text-fill-color: transparent; 
      background-clip: text;
    }
    
    .glass-effect { 
      background: rgba(255,255,255,0.1); 
      backdrop-filter: blur(10px); 
      border: 1px solid rgba(255,255,255,0.2); 
    }
    
    .hover-scale { 
      transition: transform .25s cubic-bezier(.4,0,.2,1); 
    }
    
    .hover-scale:hover { 
      transform: translateY(-2px) scale(1.02); 
      box-shadow: 0 10px 25px -5px rgba(102, 126, 234, 0.2);
    }
    
    .floating { 
      animation: floating 6s ease-in-out infinite; 
    }
    
    @keyframes floating { 
      0% { transform: translateY(0) rotate(0deg); }
      50% { transform: translateY(-20px) rotate(180deg); }
      100% { transform: translateY(0) rotate(360deg); }
    }
    
    .notification { 
      animation: slideInRight .3s ease-out; 
    }
    
    @keyframes slideInRight { 
      from { transform: translateX(100%); opacity: 0; }
      to { transform: translateX(0); opacity: 1; }
    }
    
    .text-editor { 
      min-height: 200px; 
      border: 2px solid #e5e7eb; 
      border-radius: .75rem; 
      padding: 1.25rem; 
      outline: none;
      font-size: 16px;
      line-height: 1.6;
    }
    
    .text-editor:focus { 
      border-color: #667eea; 
      box-shadow: 0 0 0 4px rgba(102,126,234,.1);
    }
    
    .file-drop-zone { 
      transition: all .3s ease; 
      border: 3px dashed #cbd5e1;
      background: rgba(249, 250, 251, 0.5);
    }
    
    .file-drop-zone.dragover { 
      border-color: #667eea; 
      background-color: rgba(102,126,234,.05); 
      transform: scale(1.01); 
    }
    
    .slide-in { 
      animation: slideIn .4s ease-out; 
    }
    
    @keyframes slideIn { 
      from { transform: translateY(20px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }
    
    .tooltip {
      position: relative;
    }
    
    .tooltip:hover::after {
      content: attr(data-tooltip);
      position: absolute;
      bottom: 100%;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(0,0,0,0.8);
      color: white;
      padding: 6px 12px;
      border-radius: 4px;
      font-size: 12px;
      white-space: nowrap;
      z-index: 1000;
      margin-bottom: 8px;
    }
    
    .loading-spinner {
      border: 3px solid #f3f3f3;
      border-top: 3px solid #667eea;
      border-radius: 50%;
      width: 24px;
      height: 24px;
      animation: spin 1s linear infinite;
    }
    
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    /* Smooth scrolling */
    html {
      scroll-behavior: smooth;
    }
    
    /* Better focus styles */
    button:focus, input:focus, select:focus, textarea:focus {
      outline: 2px solid #667eea;
      outline-offset: 2px;
    }
    
    /* Modal backdrop blur */
    .modal-backdrop {
      backdrop-filter: blur(8px);
    }
</style>
</head>
<body class="bg-gray-50 min-h-screen flex flex-col">
  <!-- Animated Background -->
  <div aria-hidden="true" class="fixed inset-0 overflow-hidden pointer-events-none">
    <div class="absolute -top-40 -right-40 w-80 h-80 bg-purple-300 rounded-full mix-blend-multiply filter blur-xl opacity-30 floating">
    </div>
    <div class="absolute -bottom-40 -left-40 w-80 h-80 bg-indigo-300 rounded-full mix-blend-multiply filter blur-xl opacity-30 floating" style="animation-delay: 2s">
    </div>
    <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-80 h-80 bg-pink-300 rounded-full mix-blend-multiply filter blur-xl opacity-30 floating" style="animation-delay: 4s">
    </div>
  </div>
  <!-- Header -->
  <header class="relative z-10 glass-effect shadow-lg" role="banner">
    <div class="max-w-7xl mx-auto px-4 py-4">
      <div class="flex items-center justify-between">
        <div class="flex items-center gap-3" aria-label="App brand">
          <div class="w-12 h-12 gradient-bg rounded-xl grid place-items-center shadow-md" aria-hidden="true">
            <i class="fas fa-file-pdf text-white text-2xl">
          </i>
        </div>
        <div>
          <h1 class="text-2xl font-bold gradient-text">
            PDF Studio
          </h1>
          <p class="text-sm text-gray-600">
            by M.V. Electronix LLC
          </p>
        </div>
      </div>
      <div class="hidden md:flex items-center gap-4">
        <a href="#features" class="text-gray-600 hover:text-purple-600 transition-colors">
        Features
      </a>
      <a href="#tools" class="text-gray-600 hover:text-purple-600 transition-colors">
      Tools
    </a>
    <a href="#privacy" class="text-gray-600 hover:text-purple-600 transition-colors">
    Privacy
  </a>
</div>
</div>
</div>
</header>
<!-- Hero Section -->
<section class="relative z-10 py-16 md:py-24 flex-grow">
  <div class="max-w-6xl mx-auto px-4 text-center">
    <div class="inline-block px-4 py-2 rounded-full bg-purple-50 text-purple-700 font-medium mb-6">
      <i class="fas fa-shield-alt mr-2">
    </i>
    100% Client-Side Processing
  </div>
  <h2 class="text-5xl md:text-7xl font-extrabold mb-6 leading-tight">
    <span class="gradient-text">
    Transform Your PDFs
  </span>
  <br>
  <span class="text-gray-800 text-4xl md:text-5xl">
  Without Compromising Privacy
</span>
</h2>
<p class="text-xl text-gray-600 mb-10 max-w-3xl mx-auto leading-relaxed">
  Professional PDF tools by M.V. Electronix LLC. Create, edit, merge, split, and convert PDFs — 
        all processing happens in your browser. No data leaves your computer.
</p>
<div class="flex flex-col sm:flex-row gap-4 justify-center">
  <button onclick="scrollToTools()" 
                class="gradient-bg text-white px-10 py-4 rounded-xl font-semibold hover-scale shadow-xl 
                       focus:outline-none focus:ring-4 focus:ring-purple-300 transition-all duration-300
                       flex items-center justify-center gap-3">
  <i class="fas fa-bolt">
</i>
Get Started
<i class="fas fa-arrow-down ml-2" aria-hidden="true">
</i>
</button>
<button onclick="openTool('create')" 
                class="bg-white text-purple-600 px-10 py-4 rounded-xl font-semibold hover-scale shadow-lg
                       border-2 border-purple-200 focus:outline-none focus:ring-4 focus:ring-purple-100
                       flex items-center justify-center gap-3">
<i class="fas fa-plus-circle">
</i>
Create New PDF
</button>
</div>
</div>
</section>
<!-- Features -->
<section id="features" class="relative z-10 py-16 bg-white/50">
  <div class="max-w-6xl mx-auto px-4">
    <h3 class="text-4xl font-bold text-center mb-12 gradient-text">
      Why Choose PDF Studio?
    </h3>
    <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
      <div class="bg-white p-8 rounded-2xl shadow-lg hover-scale border border-gray-100">
        <div class="w-14 h-14 gradient-bg rounded-xl grid place-items-center mb-6">
          <i class="fas fa-user-shield text-white text-2xl">
        </i>
      </div>
      <h4 class="text-xl font-bold mb-3">
        Complete Privacy
      </h4>
      <p class="text-gray-600">
        All PDF processing happens in your browser. Your files never leave your computer or get uploaded to any server.
      </p>
    </div>
    <div class="bg-white p-8 rounded-2xl shadow-lg hover-scale border border-gray-100">
      <div class="w-14 h-14 gradient-bg rounded-xl grid place-items-center mb-6">
        <i class="fas fa-bolt text-white text-2xl">
      </i>
    </div>
    <h4 class="text-xl font-bold mb-3">
      Fast & Efficient
    </h4>
    <p class="text-gray-600">
      Optimized algorithms and modern web technologies ensure quick processing even for large PDF files.
    </p>
  </div>
  <div class="bg-white p-8 rounded-2xl shadow-lg hover-scale border border-gray-100">
    <div class="w-14 h-14 gradient-bg rounded-xl grid place-items-center mb-6">
      <i class="fas fa-tools text-white text-2xl">
    </i>
  </div>
  <h4 class="text-xl font-bold mb-3">
    Professional Tools
  </h4>
  <p class="text-gray-600">
    From basic editing to advanced features like watermarking and compression — all the tools you need.
  </p>
</div>
</div>
</div>
</section>
<!-- Tools Grid -->
<section id="tools" class="relative z-10 py-16">
  <div class="max-w-7xl mx-auto px-4">
    <div class="text-center mb-12">
      <h3 class="text-4xl font-bold gradient-text mb-4">
        Powerful PDF Tools
      </h3>
      <p class="text-gray-600 max-w-2xl mx-auto">
        Choose from our comprehensive suite of PDF manipulation tools
      </p>
    </div>
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
      <!-- Tool Cards -->
      <button class="tool-card bg-white rounded-2xl shadow-lg p-6 hover-scale text-left border border-gray-100 
                       transition-all duration-300 hover:border-purple-200 group"
                onclick="openTool('create')"
                data-tooltip="Create new PDFs from scratch">
      <div class="w-16 h-16 gradient-bg rounded-xl grid place-items-center mb-4 group-hover:scale-110 transition-transform">
        <i class="fas fa-plus-circle text-white text-2xl">
      </i>
    </div>
    <h4 class="text-xl font-bold mb-2 text-gray-800">
      Create PDF
    </h4>
    <p class="text-gray-600 mb-4">
      Create PDFs from text, images, or blank pages with custom formatting.
    </p>
    <span class="inline-flex items-center text-purple-600 font-medium">
    Get Started
    <i class="fas fa-arrow-right ml-2">
  </i>
</span>
</button>
<button class="tool-card bg-white rounded-2xl shadow-lg p-6 hover-scale text-left border border-gray-100
                       transition-all duration-300 hover:border-purple-200 group"
                onclick="openTool('fill')"
                data-tooltip="Fill forms and add signatures">
<div class="w-16 h-16 gradient-bg rounded-xl grid place-items-center mb-4 group-hover:scale-110 transition-transform">
  <i class="fas fa-signature text-white text-2xl">
</i>
</div>
<h4 class="text-xl font-bold mb-2 text-gray-800">
  Fill & Sign
</h4>
<p class="text-gray-600 mb-4">
  Add text fields and digital signatures to your PDF documents.
</p>
<span class="inline-flex items-center text-purple-600 font-medium">
Try Now
<i class="fas fa-arrow-right ml-2">
</i>
</span>
</button>
<button class="tool-card bg-white rounded-2xl shadow-lg p-6 hover-scale text-left border border-gray-100
                       transition-all duration-300 hover:border-purple-200 group"
                onclick="openTool('merge')"
                data-tooltip="Combine multiple PDFs">
<div class="w-16 h-16 gradient-bg rounded-xl grid place-items-center mb-4 group-hover:scale-110 transition-transform">
  <i class="fas fa-layer-group text-white text-2xl">
</i>
</div>
<h4 class="text-xl font-bold mb-2 text-gray-800">
  Merge PDFs
</h4>
<p class="text-gray-600 mb-4">
  Combine multiple PDF files into a single document while preserving quality.
</p>
<span class="inline-flex items-center text-purple-600 font-medium">
Merge Files
<i class="fas fa-arrow-right ml-2">
</i>
</span>
</button>
<button class="tool-card bg-white rounded-2xl shadow-lg p-6 hover-scale text-left border border-gray-100
                       transition-all duration-300 hover:border-purple-200 group"
                onclick="openTool('split')"
                data-tooltip="Split PDF into multiple files">
<div class="w-16 h-16 gradient-bg rounded-xl grid place-items-center mb-4 group-hover:scale-110 transition-transform">
  <i class="fas fa-cut text-white text-2xl">
</i>
</div>
<h4 class="text-xl font-bold mb-2 text-gray-800">
  Split PDF
</h4>
<p class="text-gray-600 mb-4">
  Extract specific pages or split PDF into multiple documents.
</p>
<span class="inline-flex items-center text-purple-600 font-medium">
Split Now
<i class="fas fa-arrow-right ml-2">
</i>
</span>
</button>
<button class="tool-card bg-white rounded-2xl shadow-lg p-6 hover-scale text-left border border-gray-100
                       transition-all duration-300 hover:border-purple-200 group"
                onclick="openTool('compress')"
                data-tooltip="Reduce PDF file size">
<div class="w-16 h-16 gradient-bg rounded-xl grid place-items-center mb-4 group-hover:scale-110 transition-transform">
  <i class="fas fa-compress text-white text-2xl">
</i>
</div>
<h4 class="text-xl font-bold mb-2 text-gray-800">
  Compress PDF
</h4>
<p class="text-gray-600 mb-4">
  Reduce PDF file size while maintaining acceptable quality for sharing.
</p>
<span class="inline-flex items-center text-purple-600 font-medium">
Compress
<i class="fas fa-arrow-right ml-2">
</i>
</span>
</button>
<button class="tool-card bg-white rounded-2xl shadow-lg p-6 hover-scale text-left border border-gray-100
                       transition-all duration-300 hover:border-purple-200 group"
                onclick="openTool('convert')"
                data-tooltip="Convert files to PDF">
<div class="w-16 h-16 gradient-bg rounded-xl grid place-items-center mb-4 group-hover:scale-110 transition-transform">
  <i class="fas fa-file-arrow-down text-white text-2xl">
</i>
</div>
<h4 class="text-xl font-bold mb-2 text-gray-800">
  Convert to PDF
</h4>
<p class="text-gray-600 mb-4">
  Convert images, text files, and other documents to PDF format.
</p>
<span class="inline-flex items-center text-purple-600 font-medium">
Convert
<i class="fas fa-arrow-right ml-2">
</i>
</span>
</button>
<button class="tool-card bg-white rounded-2xl shadow-lg p-6 hover-scale text-left border border-gray-100
                       transition-all duration-300 hover:border-purple-200 group"
                onclick="openTool('watermark')"
                data-tooltip="Add watermarks to PDF">
<div class="w-16 h-16 gradient-bg rounded-xl grid place-items-center mb-4 group-hover:scale-110 transition-transform">
  <i class="fas fa-stamp text-white text-2xl">
</i>
</div>
<h4 class="text-xl font-bold mb-2 text-gray-800">
  Add Watermark
</h4>
<p class="text-gray-600 mb-4">
  Add text or image watermarks with customizable opacity and position.
</p>
<span class="inline-flex items-center text-purple-600 font-medium">
Add Watermark
<i class="fas fa-arrow-right ml-2">
</i>
</span>
</button>
<button class="tool-card bg-white rounded-2xl shadow-lg p-6 hover-scale text-left border border-gray-100
                       transition-all duration-300 hover:border-purple-200 group"
                onclick="openTool('rotate')"
                data-tooltip="Rotate PDF pages">
<div class="w-16 h-16 gradient-bg rounded-xl grid place-items-center mb-4 group-hover:scale-110 transition-transform">
  <i class="fas fa-rotate-right text-white text-2xl">
</i>
</div>
<h4 class="text-xl font-bold mb-2 text-gray-800">
  Rotate Pages
</h4>
<p class="text-gray-600 mb-4">
  Rotate individual pages or entire document to correct orientation.
</p>
<span class="inline-flex items-center text-purple-600 font-medium">
Rotate
<i class="fas fa-arrow-right ml-2">
</i>
</span>
</button>
</div>
</div>
</section>
<!-- Privacy Section -->
<section id="privacy" class="relative z-10 py-16 bg-gradient-to-br from-purple-50 to-indigo-50">
  <div class="max-w-6xl mx-auto px-4">
    <div class="text-center mb-12">
      <h3 class="text-4xl font-bold gradient-text mb-4">
        Your Privacy is Our Priority
      </h3>
      <p class="text-gray-700 max-w-2xl mx-auto">
        Understanding how we protect your data
      </p>
    </div>
    <div class="bg-white rounded-2xl shadow-xl p-8 md:p-12">
      <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
        <div>
          <h4 class="text-2xl font-bold mb-4 text-gray-800">
            How It Works
          </h4>
          <ul class="space-y-4">
            <li class="flex items-start gap-3">
              <i class="fas fa-check-circle text-green-500 mt-1">
            </i>
            <span class="text-gray-700">
            All processing happens in your browser using JavaScript
          </span>
        </li>
        <li class="flex items-start gap-3">
          <i class="fas fa-check-circle text-green-500 mt-1">
        </i>
        <span class="text-gray-700">
        No file uploads to external servers
      </span>
    </li>
    <li class="flex items-start gap-3">
      <i class="fas fa-check-circle text-green-500 mt-1">
    </i>
    <span class="text-gray-700">
    No data collection or tracking
  </span>
</li>
<li class="flex items-start gap-3">
  <i class="fas fa-check-circle text-green-500 mt-1">
</i>
<span class="text-gray-700">
Works completely offline after initial load
</span>
</li>
</ul>
</div>
<div>
  <h4 class="text-2xl font-bold mb-4 text-gray-800">
    Technical Details
  </h4>
  <ul class="space-y-4">
    <li class="flex items-start gap-3">
      <i class="fas fa-code text-blue-500 mt-1">
    </i>
    <span class="text-gray-700">
    Built with PDF.js, jsPDF, and PDF-Lib libraries
  </span>
</li>
<li class="flex items-start gap-3">
  <i class="fas fa-shield-alt text-blue-500 mt-1">
</i>
<span class="text-gray-700">
No backend infrastructure required
</span>
</li>
<li class="flex items-start gap-3">
  <i class="fas fa-bolt text-blue-500 mt-1">
</i>
<span class="text-gray-700">
Optimized for modern browsers and devices
</span>
</li>
<li class="flex items-start gap-3">
  <i class="fas fa-database text-blue-500 mt-1">
</i>
<span class="text-gray-700">
All data stays in your browser's memory
</span>
</li>
</ul>
</div>
</div>
</div>
</div>
</section>
<!-- Footer -->
<footer class="relative z-10 bg-gray-900 text-white py-12 mt-auto">
  <div class="max-w-7xl mx-auto px-4">
    <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
      <div>
        <div class="flex items-center gap-3 mb-4">
          <div class="w-10 h-10 gradient-bg rounded-lg grid place-items-center">
            <i class="fas fa-file-pdf text-white">
          </i>
        </div>
        <div>
          <h3 class="text-xl font-bold">
            PDF Studio
          </h3>
          <p class="text-sm text-gray-400">
            by M.V. Electronix LLC
          </p>
        </div>
      </div>
      <p class="text-gray-400 text-sm">
        Professional PDF tools with complete privacy protection.
      </p>
    </div>
    <div>
      <h4 class="font-bold text-lg mb-4">
        Tools
      </h4>
      <ul class="space-y-2">
        <li>
          <a href="#" onclick="openTool('create')" class="text-gray-400 hover:text-white transition">
          Create PDF
        </a>
      </li>
      <li>
        <a href="#" onclick="openTool('merge')" class="text-gray-400 hover:text-white transition">
        Merge PDFs
      </a>
    </li>
    <li>
      <a href="#" onclick="openTool('split')" class="text-gray-400 hover:text-white transition">
      Split PDF
    </a>
  </li>
  <li>
    <a href="#" onclick="openTool('compress')" class="text-gray-400 hover:text-white transition">
    Compress PDF
  </a>
</li>
</ul>
</div>
<div>
  <h4 class="font-bold text-lg mb-4">
    Company
  </h4>
  <ul class="space-y-2">
    <li>
      <a href="#features" class="text-gray-400 hover:text-white transition">
      Features
    </a>
  </li>
  <li>
    <a href="#privacy" class="text-gray-400 hover:text-white transition">
    Privacy
  </a>
</li>
<li>
  <a href="#tools" class="text-gray-400 hover:text-white transition">
  All Tools
</a>
</li>
</ul>
</div>
<div>
  <h4 class="font-bold text-lg mb-4">
    Connect
  </h4>
  <div class="flex gap-4 mb-4">
    <a href="#" class="text-gray-400 hover:text-white transition text-xl" aria-label="Twitter">
    <i class="fab fa-twitter">
  </i>
</a>
<a href="#" class="text-gray-400 hover:text-white transition text-xl" aria-label="LinkedIn">
<i class="fab fa-linkedin">
</i>
</a>
<a href="#" class="text-gray-400 hover:text-white transition text-xl" aria-label="GitHub">
<i class="fab fa-github">
</i>
</a>
</div>
<p class="text-gray-500 text-sm">
  ©
  <span id="year">
</span>
M.V. Electronix LLC. All rights reserved.
</p>
</div>
</div>
</div>
</footer>
<!-- Modal -->
<div id="toolModal" class="fixed inset-0 z-50 hidden" role="dialog" aria-modal="true" aria-labelledby="toolTitle">
  <div class="modal-backdrop fixed inset-0 bg-black/60" onclick="closeTool()">
  </div>
  <div class="flex items-center justify-center min-h-screen p-4">
    <div class="bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden slide-in relative">
      <div class="gradient-bg p-6 text-white">
        <div class="flex items-center justify-between">
          <div class="flex items-center gap-3">
            <div class="w-10 h-10 bg-white/20 rounded-lg grid place-items-center">
              <i class="fas fa-tools text-white">
            </i>
          </div>
          <div>
            <h3 id="toolTitle" class="text-2xl font-bold">
              Tool
            </h3>
            <p class="text-sm/relaxed opacity-90">
              Powered by M.V. Electronix LLC
            </p>
          </div>
        </div>
        <button onclick="closeTool()" 
                    class="text-white hover:text-gray-200 focus:outline-none focus:ring-4 
                           focus:ring-white/30 rounded-lg p-2 transition-colors"
                    aria-label="Close tool">
        <i class="fas fa-times text-2xl">
      </i>
    </button>
  </div>
</div>
<div class="p-6 overflow-y-auto max-h-[calc(90vh-120px)]">
  <div id="toolContent" class="space-y-6">
  </div>
</div>
</div>
</div>
</div>
<!-- Notifications -->
<div id="notificationContainer" class="fixed top-4 right-4 z-50 space-y-2" aria-live="polite">
</div>
<!-- Loading Overlay -->
<div id="loadingOverlay" class="fixed inset-0 bg-black/50 z-50 hidden flex items-center justify-center">
  <div class="bg-white rounded-xl p-8 flex flex-col items-center gap-4 shadow-2xl">
    <div class="loading-spinner">
    </div>
    <p class="text-gray-700 font-medium" id="loadingMessage">
      Processing...
    </p>
  </div>
</div>
<script>
// ========== CONFIGURATION ==========
    pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';
    
    // ========== STATE MANAGEMENT ==========
    let currentTool = '';
    let uploadedFiles = [];
    let uploadedImages = [];
    let savedSignature = null;
    let rotationAngle = 0;
    let editTool = null;
    
    // ========== DOM UTILITIES ==========
    const $ = (sel) => document.querySelector(sel);
    const $$ = (sel) => Array.from(document.querySelectorAll(sel));
    
    // ========== UI FUNCTIONS ==========
    function scrollToTools() {
      document.getElementById('tools').scrollIntoView({ behavior: 'smooth' });
    }
    
    function showLoading(message = 'Processing...') {
      $('#loadingMessage').textContent = message;
      $('#loadingOverlay').classList.remove('hidden');
    }
    
    function hideLoading() {
      $('#loadingOverlay').classList.add('hidden');
    }
    
    function showNotification(message, type = 'info') {
      const container = $('#notificationContainer');
      const colors = {
        success: 'bg-green-600',
        error: 'bg-red-600',
        info: 'bg-blue-600',
        warning: 'bg-yellow-600'
      };
      
      const notification = document.createElement('div');
      notification.className = `notification ${colors[type]} text-white px-6 py-4 rounded-lg shadow-xl flex items-center gap-3 min-w-[300px] max-w-md`;
      notification.innerHTML = `
<i class="fas fa-${type === 'success' ? 'check-circle' : type === 'error' ? 'exclamation-circle' : 'info-circle'} text-lg">
</i>
<div class="flex-1">
  <p class="font-medium">
    ${message}
  </p>
  <p class="text-sm opacity-90">
    ${new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}
  </p>
</div>
<button onclick="this.parentElement.remove()" class="text-white/70 hover:text-white">
<i class="fas fa-times">
</i>
</button>
`;
      
      container.appendChild(notification);
      
      setTimeout(() => {
        notification.style.opacity = '0';
        notification.style.transform = 'translateX(100%)';
        setTimeout(() => notification.remove(), 300);
      }, 4000);
    }
    
    // ========== FILE UTILITIES ==========
    function formatFileSize(bytes) {
      if (bytes === 0) return '0 B';
      const k = 1024;
      const sizes = ['B', 'KB', 'MB', 'GB'];
      const i = Math.floor(Math.log(bytes) / Math.log(k));
      return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
    }
    
    function createDownloadLink(bytes, filename) {
      const blob = new Blob([bytes], { type: 'application/pdf' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = filename;
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      setTimeout(() => URL.revokeObjectURL(url), 100);
    }
    
    // ========== MODAL MANAGEMENT ==========
    function openTool(toolName) {
      currentTool = toolName;
      const modal = $('#toolModal');
      const title = $('#toolTitle');
      const content = $('#toolContent');
      
      const tools = {
        create: { title: 'Create PDF', content: getCreateContent() },
        fill: { title: 'Fill & Sign', content: getFillContent() },
        edit: { title: 'Edit PDF', content: getEditContent() },
        merge: { title: 'Merge PDFs', content: getMergeContent() },
        split: { title: 'Split PDF', content: getSplitContent() },
        compress: { title: 'Compress PDF', content: getCompressContent() },
        convert: { title: 'Convert to PDF', content: getConvertContent() },
        watermark: { title: 'Add Watermark', content: getWatermarkContent() },
        rotate: { title: 'Rotate Pages', content: getRotateContent() }
      };
      
      const tool = tools[toolName];
      if (!tool) return;
      
      title.textContent = tool.title;
      content.innerHTML = tool.content;
      modal.classList.remove('hidden');
      
      // Initialize tool-specific functionality
      if (toolName === 'create') initializeCreateTool();
      else if (toolName === 'fill') initializeFillTool();
      else if (toolName === 'edit') initializeEditTool();
      else initializeDragAndDrop();
    }
    
    function closeTool() {
      const modal = $('#toolModal');
      modal.classList.add('hidden');
      uploadedFiles = [];
      uploadedImages = [];
      savedSignature = null;
      editTool = null;
    }
    
    // ========== TOOL CONTENT GENERATORS ==========
    function getCreateContent() {
      return `
<div class="space-y-8">
  <div class="bg-gradient-to-r from-purple-50 to-indigo-50 p-6 rounded-xl">
    <h4 class="font-bold text-lg mb-4 text-gray-800">
      Create PDF from:
    </h4>
    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
      <label class="flex flex-col items-center justify-center p-6 bg-white rounded-xl border-2 border-purple-200 cursor-pointer hover:border-purple-400 transition-colors group">
      <i class="fas fa-font text-3xl text-purple-600 mb-3 group-hover:scale-110 transition-transform">
    </i>
    <input type="radio" name="createType" value="text" checked class="hidden">
    <p class="font-semibold text-gray-800">
      Text Document
    </p>
    <p class="text-sm text-gray-600 text-center mt-1">
      Write or paste formatted text
    </p>
  </label>
  <label class="flex flex-col items-center justify-center p-6 bg-white rounded-xl border-2 border-gray-200 cursor-pointer hover:border-purple-400 transition-colors group">
  <i class="fas fa-images text-3xl text-purple-600 mb-3 group-hover:scale-110 transition-transform">
</i>
<input type="radio" name="createType" value="images" class="hidden">
<p class="font-semibold text-gray-800">
  Images
</p>
<p class="text-sm text-gray-600 text-center mt-1">
  Convert JPG/PNG to PDF
</p>
</label>
<label class="flex flex-col items-center justify-center p-6 bg-white rounded-xl border-2 border-gray-200 cursor-pointer hover:border-purple-400 transition-colors group">
<i class="fas fa-file text-3xl text-purple-600 mb-3 group-hover:scale-110 transition-transform">
</i>
<input type="radio" name="createType" value="blank" class="hidden">
<p class="font-semibold text-gray-800">
  Blank Document
</p>
<p class="text-sm text-gray-600 text-center mt-1">
  Create empty pages
</p>
</label>
</div>
</div>
<!-- Text Editor -->
<div id="textCreate" class="space-y-6 slide-in">
  <div class="bg-white p-6 rounded-xl border border-gray-200">
    <div class="flex justify-between items-center mb-4">
      <h5 class="font-bold text-gray-800">
        Document Editor
      </h5>
      <button onclick="formatText('bold')" class="p-2 hover:bg-gray-100 rounded" title="Bold">
      <i class="fas fa-bold">
    </i>
  </button>
</div>
<div contenteditable="true" id="textContent" class="text-editor" 
                   data-placeholder="Start typing your content here...">
</div>
</div>
<div class="grid grid-cols-1 md:grid-cols-3 gap-4">
  <div>
    <label class="block text-sm font-medium text-gray-700 mb-2">
    Document Title
  </label>
  <input type="text" id="docTitle" placeholder="Enter document title" 
                       class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:border-purple-500 focus:ring-2 focus:ring-purple-200">
</div>
<div>
  <label class="block text-sm font-medium text-gray-700 mb-2">
  Font Size
</label>
<select id="fontSizeSelect" 
                        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:border-purple-500 focus:ring-2 focus:ring-purple-200">
<option value="12">
  12px (Small)
</option>
<option value="14" selected>
  14px (Normal)
</option>
<option value="16">
  16px (Large)
</option>
<option value="18">
  18px (Heading)
</option>
<option value="24">
  24px (Title)
</option>
</select>
</div>
<div>
  <label class="block text-sm font-medium text-gray-700 mb-2">
  Page Size
</label>
<select id="pageSize" 
                        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:border-purple-500 focus:ring-2 focus:ring-purple-200">
<option value="a4">
  A4 (210 × 297mm)
</option>
<option value="letter">
  Letter (8.5 × 11in)
</option>
<option value="legal">
  Legal (8.5 × 14in)
</option>
</select>
</div>
</div>
</div>
<!-- Image Upload -->
<div id="imageCreate" class="hidden space-y-6 slide-in">
  <div class="file-drop-zone p-12 rounded-xl text-center" id="imageDrop">
    <i class="fas fa-cloud-upload-alt text-6xl text-gray-400 mb-6">
  </i>
  <p class="text-lg font-medium text-gray-700 mb-2">
    Drag & drop images here
  </p>
  <p class="text-sm text-gray-500 mb-6">
    Supports JPG, PNG, WEBP formats
  </p>
  <input type="file" id="imageInput" multiple accept="image/*" class="hidden">
  <button onclick="document.getElementById('imageInput').click()" 
                      class="gradient-bg text-white px-8 py-3 rounded-lg hover-scale font-semibold shadow-lg">
  <i class="fas fa-folder-open mr-2">
</i>
Browse Images
</button>
</div>
<div id="imageList" class="space-y-3">
</div>
</div>
<!-- Blank Document -->
<div id="blankCreate" class="hidden space-y-6 slide-in">
  <div class="bg-white p-6 rounded-xl border border-gray-200">
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">
        Page Size
      </label>
      <select id="blankPageSize" 
                          class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:border-purple-500 focus:ring-2 focus:ring-purple-200">
      <option value="a4">
        A4
      </option>
      <option value="letter">
        Letter
      </option>
      <option value="legal">
        Legal
      </option>
    </select>
  </div>
  <div>
    <label class="block text-sm font-medium text-gray-700 mb-2">
    Number of Pages
  </label>
  <input type="number" id="pageCount" min="1" max="100" value="1" 
                         class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:border-purple-500 focus:ring-2 focus:ring-purple-200">
</div>
<div>
  <label class="block text-sm font-medium text-gray-700 mb-2">
  Orientation
</label>
<select id="orientation" 
                          class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:border-purple-500 focus:ring-2 focus:ring-purple-200">
<option value="portrait">
  Portrait
</option>
<option value="landscape">
  Landscape
</option>
</select>
</div>
</div>
</div>
</div>
<button onclick="createPDF()" 
                  class="gradient-bg text-white px-8 py-4 rounded-xl hover-scale w-full font-semibold text-lg shadow-lg 
                         flex items-center justify-center gap-3">
<i class="fas fa-file-pdf">
</i>
Create PDF Document
</button>
</div>
`;
    }
    
    function getFillContent() {
      return `
<div class="space-y-8">
  <div class="file-drop-zone p-12 rounded-xl text-center" id="dropZone">
    <i class="fas fa-cloud-upload-alt text-6xl text-gray-400 mb-6">
  </i>
  <p class="text-lg font-medium text-gray-700 mb-2">
    Drag & drop a PDF file
  </p>
  <p class="text-sm text-gray-500 mb-6">
    or click to browse your files
  </p>
  <input type="file" id="fileInput" accept=".pdf" class="hidden">
  <button onclick="document.getElementById('fileInput').click()" 
                    class="gradient-bg text-white px-8 py-3 rounded-lg hover-scale font-semibold shadow-lg">
  <i class="fas fa-folder-open mr-2">
</i>
Choose PDF File
</button>
</div>
<div id="formFields" class="hidden space-y-6">
  <div class="bg-gradient-to-r from-purple-50 to-indigo-50 p-6 rounded-xl">
    <h4 class="font-bold text-lg mb-4 text-gray-800">
      Signature Tool
    </h4>
    <div class="mb-6">
      <label class="block text-sm font-medium text-gray-700 mb-3">
      Draw Your Signature
    </label>
    <canvas id="signatureCanvas" class="w-full bg-white rounded-lg border-2 border-gray-300" 
                        style="height: 200px; touch-action: none;">
    </canvas>
    <p class="text-sm text-gray-500 mt-2">
      Draw your signature in the box above
    </p>
  </div>
  <div class="flex gap-3">
    <button onclick="clearSignature()" 
                        class="flex-1 px-6 py-3 border-2 border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 
                               font-medium transition-colors flex items-center justify-center gap-2">
    <i class="fas fa-eraser">
  </i>
  Clear
</button>
<button onclick="saveSignature()" 
                        class="flex-1 gradient-bg text-white px-6 py-3 rounded-lg hover-scale font-semibold 
                               flex items-center justify-center gap-2">
<i class="fas fa-save">
</i>
Save Signature
</button>
</div>
</div>
<div class="bg-white p-6 rounded-xl border border-gray-200">
  <h4 class="font-bold text-lg mb-4 text-gray-800">
    Text Fields
  </h4>
  <div class="space-y-4">
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-2">
      Text to Add
    </label>
    <input type="text" id="fillText" placeholder="Enter text to add to PDF" 
                         class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:border-purple-500 focus:ring-2 focus:ring-purple-200">
  </div>
  <div class="grid grid-cols-2 gap-4">
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-2">
      X Position
    </label>
    <input type="number" id="textX" value="50" min="0" max="500" 
                           class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:border-purple-500 focus:ring-2 focus:ring-purple-200">
  </div>
  <div>
    <label class="block text-sm font-medium text-gray-700 mb-2">
    Y Position
  </label>
  <input type="number" id="textY" value="100" min="0" max="800" 
                           class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:border-purple-500 focus:ring-2 focus:ring-purple-200">
</div>
</div>
</div>
</div>
</div>
<button id="fillBtn" onclick="fillPDF()" 
                  class="gradient-bg text-white px-8 py-4 rounded-xl hover-scale w-full font-semibold text-lg shadow-lg 
                         disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-3"
                  disabled>
<i class="fas fa-signature">
</i>
Fill & Save PDF
</button>
</div>
`;
    }
    
    function getMergeContent() {
      return `
<div class="space-y-8">
  <div class="file-drop-zone p-12 rounded-xl text-center" id="dropZone">
    <i class="fas fa-cloud-upload-alt text-6xl text-gray-400 mb-6">
  </i>
  <p class="text-lg font-medium text-gray-700 mb-2">
    Drag & drop PDF files to merge
  </p>
  <p class="text-sm text-gray-500 mb-6">
    Order matters — you can reorder after uploading
  </p>
  <input type="file" id="fileInput" multiple accept=".pdf" class="hidden">
  <button onclick="document.getElementById('fileInput').click()" 
                    class="gradient-bg text-white px-8 py-3 rounded-lg hover-scale font-semibold shadow-lg">
  <i class="fas fa-folder-open mr-2">
</i>
Select PDF Files
</button>
</div>
<div id="fileList" class="space-y-3">
</div>
<div class="flex gap-4">
  <button onclick="clearFiles()" 
                    class="flex-1 px-6 py-3 border-2 border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 
                           font-medium transition-colors flex items-center justify-center gap-2">
  <i class="fas fa-trash">
</i>
Clear All
</button>
<button id="mergeBtn" onclick="mergePDFs()" 
                    class="flex-1 gradient-bg text-white px-6 py-3 rounded-lg hover-scale font-semibold 
                           disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2"
                    disabled>
<i class="fas fa-layer-group">
</i>
Merge PDFs
</button>
</div>
</div>
`;
    }
    
    // Note: Other tool content functions would follow similar pattern but are truncated for brevity
    // In practice, you'd include all the tool content functions similar to the examples above
    
    // ========== TOOL INITIALIZATION ==========
    function initializeCreateTool() {
      const createTypeRadios = $$('input[name="createType"]');
      createTypeRadios.forEach(radio => {
        radio.addEventListener('change', function() {
          const type = this.value;
          $('#textCreate').classList.toggle('hidden', type !== 'text');
          $('#imageCreate').classList.toggle('hidden', type !== 'images');
          $('#blankCreate').classList.toggle('hidden', type !== 'blank');
          
          if (type === 'images') {
            initializeImageUpload();
          }
        });
      });
      
      // Initialize text editor placeholder
      const editor = $('#textContent');
      editor.addEventListener('focus', function() {
        if (this.textContent === 'Start typing your content here...') {
          this.textContent = '';
        }
      });
      
      editor.addEventListener('blur', function() {
        if (this.textContent.trim() === '') {
          this.textContent = 'Start typing your content here...';
        }
      });
    }
    
    function initializeFillTool() {
      initializeSignatureCanvas();
      const fileInput = $('#fileInput');
      const dropZone = $('#dropZone');
      
      fileInput.addEventListener('change', handleFileUpload);
      
      // Drag and drop for fill tool
      ['dragover', 'dragenter'].forEach(event => {
        dropZone.addEventListener(event, (e) => {
          e.preventDefault();
          dropZone.classList.add('dragover');
        });
      });
      
      ['dragleave', 'dragend', 'drop'].forEach(event => {
        dropZone.addEventListener(event, (e) => {
          e.preventDefault();
          dropZone.classList.remove('dragover');
        });
      });
      
      dropZone.addEventListener('drop', (e) => {
        e.preventDefault();
        const files = e.dataTransfer.files;
        if (files.length > 0 && files[0].type === 'application/pdf') {
          handleFileUpload({ target: { files } });
        }
      });
    }
    
    function initializeEditTool() {
      // Initialize edit canvas and tools
    }
    
    function initializeDragAndDrop() {
      const dropZone = $('#dropZone');
      const fileInput = $('#fileInput');
      
      if (!dropZone || !fileInput) return;
      
      ['dragover', 'dragenter'].forEach(event => {
        dropZone.addEventListener(event, (e) => {
          e.preventDefault();
          dropZone.classList.add('dragover');
        });
      });
      
      ['dragleave', 'dragend', 'drop'].forEach(event => {
        dropZone.addEventListener(event, (e) => {
          e.preventDefault();
          dropZone.classList.remove('dragover');
        });
      });
      
      dropZone.addEventListener('drop', (e) => {
        const files = e.dataTransfer.files;
        handleFiles(files);
      });
      
      fileInput.addEventListener('change', (e) => handleFiles(e.target.files));
    }
    
    // ========== FILE HANDLING ==========
    function handleFiles(files) {
      uploadedFiles = Array.from(files);
      
      switch (currentTool) {
        case 'merge':
          displayMergeFiles();
          break;
        case 'split':
        case 'compress':
        case 'watermark':
        case 'rotate':
          if (uploadedFiles.length > 0) {
            showToolOptions();
            enableToolButton();
          }
          break;
        case 'fill':
          if (uploadedFiles.length > 0) {
            $('#formFields').classList.remove('hidden');
            $('#fillBtn').disabled = false;
          }
          break;
        case 'convert':
          displayConvertFiles();
          break;
      }
    }
    
    function displayMergeFiles() {
      const fileList = $('#fileList');
      const mergeBtn = $('#mergeBtn');
      
      fileList.innerHTML = uploadedFiles.map((file, i) => `
<div class="flex items-center justify-between p-4 bg-white rounded-lg border border-gray-200 hover:border-purple-300 transition-colors">
  <div class="flex items-center gap-4">
    <div class="w-10 h-10 bg-red-50 rounded-lg grid place-items-center">
      <i class="fas fa-file-pdf text-red-500">
    </i>
  </div>
  <div>
    <p class="font-medium text-gray-800 truncate max-w-[200px]">
      ${file.name}
    </p>
    <p class="text-sm text-gray-500">
      ${formatFileSize(file.size)}
    </p>
  </div>
</div>
<div class="flex items-center gap-2">
  <button onclick="moveFile(${i}, -1)" 
                    class="p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg ${i === 0 ? 'opacity-50 cursor-not-allowed' : ''}"
                    title="Move up">
  <i class="fas fa-chevron-up">
</i>
</button>
<button onclick="moveFile(${i}, 1)" 
                    class="p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg ${i === uploadedFiles.length - 1 ? 'opacity-50 cursor-not-allowed' : ''}"
                    title="Move down">
<i class="fas fa-chevron-down">
</i>
</button>
<button onclick="removeFile(${i})" 
                    class="p-2 text-red-500 hover:text-red-700 hover:bg-red-50 rounded-lg"
                    title="Remove">
<i class="fas fa-times">
</i>
</button>
</div>
</div>
`).join('');
      
      mergeBtn.disabled = uploadedFiles.length
< 2;
    }
    
    function moveFile(index, direction) {
      const newIndex = index + direction;
      if (newIndex >
  = 0 && newIndex
  < uploadedFiles.length) {
        [uploadedFiles[index], uploadedFiles[newIndex]] = [uploadedFiles[newIndex], uploadedFiles[index]];
        displayMergeFiles();
      }
    }
    
    function removeFile(index) {
      uploadedFiles.splice(index, 1);
      if (currentTool === 'merge') displayMergeFiles();
      else if (currentTool === 'convert') displayConvertFiles();
    }
    
    function clearFiles() {
      uploadedFiles = [];
      if (currentTool === 'merge') displayMergeFiles();
      else if (currentTool === 'convert') displayConvertFiles();
    }
    
    // ========== SIGNATURE CANVAS ==========
    function initializeSignatureCanvas() {
      const canvas = $('#signatureCanvas');
      const ctx = canvas.getContext('2d');
      let isDrawing = false;
      let lastX = 0;
      let lastY = 0;
      
      // Set canvas size
      const resizeCanvas = () =>
    {
        canvas.width = canvas.offsetWidth * 2;
        canvas.height = canvas.offsetHeight * 2;
        ctx.scale(2, 2);
        ctx.lineCap = 'round';
        ctx.lineJoin = 'round';
        ctx.lineWidth = 2;
        ctx.strokeStyle = '#000000';
      };
      
      resizeCanvas();
      window.addEventListener('resize', resizeCanvas);
      
      // Drawing functions
      const startDrawing = (e) => {
        isDrawing = true;
        [lastX, lastY] = getMousePos(e);
      };
      
      const draw = (e) => {
        if (!isDrawing) return;
        const [x, y] = getMousePos(e);
        
        ctx.beginPath();
        ctx.moveTo(lastX, lastY);
        ctx.lineTo(x, y);
        ctx.stroke();
        
        [lastX, lastY] = [x, y];
      };
      
      const stopDrawing = () => {
        isDrawing = false;
      };
      
      const getMousePos = (e) => {
        const rect = canvas.getBoundingClientRect();
        const x = (e.clientX || e.touches[0].clientX) - rect.left;
        const y = (e.clientY || e.touches[0].clientY) - rect.top;
        return [x, y];
      };
      
      // Event listeners
      canvas.addEventListener('mousedown', startDrawing);
      canvas.addEventListener('mousemove', draw);
      canvas.addEventListener('mouseup', stopDrawing);
      canvas.addEventListener('mouseout', stopDrawing);
      
      // Touch support
      canvas.addEventListener('touchstart', (e) => {
        e.preventDefault();
        startDrawing(e);
      }, { passive: false });
      
      canvas.addEventListener('touchmove', (e) => {
        e.preventDefault();
        draw(e);
      }, { passive: false });
      
      canvas.addEventListener('touchend', stopDrawing);
    }
    
    function clearSignature() {
      const canvas = $('#signatureCanvas');
      const ctx = canvas.getContext('2d');
      ctx.clearRect(0, 0, canvas.width, canvas.height);
    }
    
    function saveSignature() {
      const canvas = $('#signatureCanvas');
      savedSignature = canvas.toDataURL('image/png');
      showNotification('Signature saved successfully!', 'success');
    }
    
    // ========== PDF CREATION ==========
    async function createPDF() {
      const type = document.querySelector('input[name="createType"]:checked').value;
      
      try {
        showLoading('Creating PDF...');
        
        if (type === 'text') {
          await createTextPDF();
        } else if (type === 'images') {
          await createImagePDF();
        } else if (type === 'blank') {
          await createBlankPDF();
        }
      } catch (error) {
        console.error('Error creating PDF:', error);
        showNotification('Error creating PDF. Please try again.', 'error');
      } finally {
        hideLoading();
      }
    }
    
    async function createTextPDF() {
      const { jsPDF } = window.jspdf;
      const doc = new jsPDF();
      
      const title = $('#docTitle').value || 'Untitled Document';
      const content = $('#textContent').innerText || '';
      const fontSize = parseInt($('#fontSizeSelect').value);
      const pageSize = $('#pageSize').value;
      
      doc.setFontSize(fontSize);
      doc.setFont('helvetica', 'normal');
      
      // Add title
      doc.text(title, 20, 30);
      
      // Add content
      const lines = doc.splitTextToSize(content, 170);
      doc.text(lines, 20, 50);
      
      // Save the PDF
      doc.save(`${title.replace(/[^a-z0-9]/gi, '_')}.pdf`);
      showNotification('PDF created successfully!', 'success');
    }
    
    async function createImagePDF() {
      if (uploadedImages.length === 0) {
        showNotification('Please upload at least one image.', 'error');
        return;
      }
      
      const { jsPDF } = window.jspdf;
      const doc = new jsPDF();
      
      for (let i = 0; i
    < uploadedImages.length; i++) {
        if (i >
      0) doc.addPage();
        
        const img = new Image();
        img.src = uploadedImages[i];
        
        await new Promise((resolve) => {
          img.onload = () => {
            const pageWidth = doc.internal.pageSize.getWidth();
            const pageHeight = doc.internal.pageSize.getHeight();
            
            // Calculate dimensions to fit the page
            const imgWidth = img.width;
            const imgHeight = img.height;
            const ratio = Math.min(pageWidth / imgWidth, pageHeight / imgHeight);
            const width = imgWidth * ratio;
            const height = imgHeight * ratio;
            const x = (pageWidth - width) / 2;
            const y = (pageHeight - height) / 2;
            
            doc.addImage(img, 'JPEG', x, y, width, height);
            resolve();
          };
        });
      }
      
      doc.save('images.pdf');
      showNotification('PDF created from images!', 'success');
    }
    
    async function createBlankPDF() {
      const { jsPDF } = window.jspdf;
      const pageSize = $('#blankPageSize').value;
      const pageCount = parseInt($('#pageCount').value);
      const orientation = $('#orientation').value;
      
      const doc = new jsPDF({
        orientation: orientation,
        unit: 'mm',
        format: pageSize
      });
      
      // Add additional pages if needed
      for (let i = 1; i
      < pageCount; i++) {
        doc.addPage();
      }
      
      doc.save('blank_document.pdf');
      showNotification('Blank PDF created successfully!', 'success');
    }
    
    // ========== PDF FILL & SIGN ==========
    async function fillPDF() {
      if (uploadedFiles.length === 0) {
        showNotification('Please upload a PDF file first.', 'error');
        return;
      }
      
      try {
        showLoading('Adding signature and text...');
        
        const file = uploadedFiles[0];
        const arrayBuffer = await file.arrayBuffer();
        const pdfDoc = await PDFLib.PDFDocument.load(arrayBuffer);
        
        // Add signature if available
        if (savedSignature) {
          try {
            const signatureImage = await pdfDoc.embedPng(savedSignature);
            const pages = pdfDoc.getPages();
            
            pages.forEach((page) =>
        {
              const { width, height } = page.getSize();
              const imgDims = signatureImage.scale(0.3); // Scale signature to 30% of original size
              
              page.drawImage(signatureImage, {
                x: width - imgDims.width - 20,
                y: 20,
                width: imgDims.width,
                height: imgDims.height,
              });
            });
          } catch (error) {
            console.warn('Could not add signature:', error);
          }
        }
        
        // Add text if provided
        const textToAdd = $('#fillText').value;
        if (textToAdd) {
          const xPos = parseInt($('#textX').value);
          const yPos = parseInt($('#textY').value);
          const pages = pdfDoc.getPages();
          
          pages.forEach((page) => {
            page.drawText(textToAdd, {
              x: xPos,
              y: yPos,
              size: 12,
            });
          });
        }
        
        // Save the PDF
        const pdfBytes = await pdfDoc.save();
        createDownloadLink(pdfBytes, `filled_${file.name}`);
        
        showNotification('PDF filled and saved successfully!', 'success');
      } catch (error) {
        console.error('Error filling PDF:', error);
        showNotification('Error processing PDF. Please try again.', 'error');
      } finally {
        hideLoading();
      }
    }
    
    // ========== PDF MERGING ==========
    async function mergePDFs() {
      if (uploadedFiles.length
        < 2) {
        showNotification('Please upload at least 2 PDF files to merge.', 'error');
        return;
      }
      
      try {
        showLoading('Merging PDF files...');
        
        const mergedPdf = await PDFLib.PDFDocument.create();
        
        for (const file of uploadedFiles) {
          const fileBytes = await file.arrayBuffer();
          const pdf = await PDFLib.PDFDocument.load(fileBytes);
          const pages = await mergedPdf.copyPages(pdf, pdf.getPageIndices());
          pages.forEach((page) =>
          mergedPdf.addPage(page));
        }
        
        const mergedPdfBytes = await mergedPdf.save();
        createDownloadLink(mergedPdfBytes, 'merged_document.pdf');
        
        showNotification(`${uploadedFiles.length} PDFs merged successfully!`, 'success');
      } catch (error) {
        console.error('Error merging PDFs:', error);
        showNotification('Error merging PDFs. Please try again.', 'error');
      } finally {
        hideLoading();
      }
    }
    
    // ========== UTILITY FUNCTIONS ==========
    function formatText(command) {
      document.execCommand(command, false, null);
    }
    
    function initializeImageUpload() {
      const imageInput = $('#imageInput');
      const imageDrop = $('#imageDrop');
      
      imageInput.addEventListener('change', handleImageInput);
      
      // Drag and drop for images
      ['dragover', 'dragenter'].forEach(event => {
        imageDrop.addEventListener(event, (e) => {
          e.preventDefault();
          imageDrop.classList.add('dragover');
        });
      });
      
      ['dragleave', 'dragend', 'drop'].forEach(event => {
        imageDrop.addEventListener(event, (e) => {
          e.preventDefault();
          imageDrop.classList.remove('dragover');
        });
      });
      
      imageDrop.addEventListener('drop', (e) => {
        const files = e.dataTransfer.files;
        handleImageInput({ target: { files } });
      });
    }
    
    function handleImageInput(event) {
      const files = Array.from(event.target.files);
      uploadedImages = [];
      const list = $('#imageList');
      list.innerHTML = '';
      
      files.forEach((file, index) => {
        if (!file.type.match('image.*')) {
          showNotification(`File ${file.name} is not an image. Skipped.`, 'warning');
          return;
        }
        
        const reader = new FileReader();
        reader.onload = (e) => {
          uploadedImages.push(e.target.result);
          
          const div = document.createElement('div');
          div.className = 'flex items-center justify-between p-4 bg-white rounded-lg border border-gray-200';
          div.innerHTML = `
          <div class="flex items-center gap-4">
            <img src="${e.target.result}" class="w-16 h-16 object-cover rounded" alt="Preview">
            <div>
              <p class="font-medium text-gray-800 truncate max-w-[200px]">
                ${file.name}
              </p>
              <p class="text-sm text-gray-500">
                ${formatFileSize(file.size)}
              </p>
            </div>
          </div>
          <button onclick="removeImage(${uploadedImages.length - 1})" 
                    class="text-red-500 hover:text-red-700 p-2 rounded-lg hover:bg-red-50">
          <i class="fas fa-times">
        </i>
      </button>
      `;
          
          list.appendChild(div);
        };
        
        reader.readAsDataURL(file);
      });
    }
    
    function removeImage(index) {
      uploadedImages.splice(index, 1);
      const list = $('#imageList');
      list.innerHTML = '';
      
      uploadedImages.forEach((src, idx) => {
        const div = document.createElement('div');
        div.className = 'flex items-center justify-between p-4 bg-white rounded-lg border border-gray-200';
        div.innerHTML = `
      <div class="flex items-center gap-4">
        <img src="${src}" class="w-16 h-16 object-cover rounded" alt="Preview">
        <div>
          <p class="font-medium text-gray-800">
            Image ${idx + 1}
          </p>
        </div>
      </div>
      `;
        list.appendChild(div);
      });
    }
    
    // ========== INITIALIZATION ==========
    document.addEventListener('DOMContentLoaded', () => {
      // Set current year in footer
      $('#year').textContent = new Date().getFullYear();
      
      // Initialize tool cards
      $$('.tool-card').forEach(card => {
        card.addEventListener('click', function() {
          const tool = this.getAttribute('onclick').match(/'(\w+)'/)[1];
          openTool(tool);
        });
      });
      
      // Add event listeners for radio buttons in create tool
      document.addEventListener('change', (e) => {
        if (e.target.name === 'createType') {
          const type = e.target.value;
          $('#textCreate').classList.toggle('hidden', type !== 'text');
          $('#imageCreate').classList.toggle('hidden', type !== 'images');
          $('#blankCreate').classList.toggle('hidden', type !== 'blank');
        }
      });
      
      // Show welcome notification
      setTimeout(() => {
        showNotification('Welcome to PDF Studio! All processing happens in your browser for maximum privacy.', 'info');
      }, 1000);
    });
    </script>
  </body>
</html>
